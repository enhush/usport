webpackJsonp([2,3],{13:function(t,n,e){"use strict";var i=e(2),a=e(4),o=e(55),c=e(56),u=e(57);i.a.use(a.d);var r=new a.d.Store({modules:{auth:o.a,club:c.a,notification:u.a}});n.a=r},20:function(t,n,e){"use strict";var i=e(6),a=e.n(i),o=e(53),c=e(54);a.a.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),n.a={auth:o.a,club:c.a}},28:function(t,n,e){e(89);var i=e(3)(e(50),e(93),null,null);t.exports=i.exports},29:function(t,n,e){"use strict";function i(t){return function(n){e.e(0).then(function(){var i=[e(102)("./"+t+".vue")];n.apply(null,i)}.bind(this)).catch(e.oe)}}var a=e(2),o=e(96),c=e(13);a.a.use(o.a);var u=new o.a({mode:"history",routes:[{name:"home",path:"/",component:i("Home"),meta:{restricted:!0},children:[{name:"club",path:"club",component:i("admin/Club")},{name:"club-add",path:"club-add",component:i("admin/ClubAdd")},{path:"*",redirect:"club"}]},{name:"login",path:"/login",component:i("Login")},{path:"*",redirect:"/login"}]});u.beforeEach(function(t,n,e){t.matched.some(function(t){return t.meta.restricted})?c.a.state.auth.authenticated?e():e({name:"login"}):"login"==t.name&&c.a.state.auth.authenticated?e({name:"home"}):e()}),n.a=u},31:function(t,n,e){e(91);var i=e(3)(e(51),e(95),null,null);t.exports=i.exports},32:function(t,n,e){e(90);var i=e(3)(e(52),e(94),null,null);t.exports=i.exports},5:function(t,n,e){"use strict";e.d(n,"e",function(){return i}),e.d(n,"f",function(){return a}),e.d(n,"a",function(){return o}),e.d(n,"d",function(){return c}),e.d(n,"c",function(){return u}),e.d(n,"b",function(){return r});var i="SET_AUTH",a="SET_USER",o="SET_INVALID",c="SET_CLUBS",u="CLOSE_NOTIFICATION",r="ADD_NOTIFICATION"},50:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e(86),a=(e.n(i),e(88)),o=(e.n(a),e(87)),c=(e.n(o),e(32)),u=e.n(c);n.default={components:{NotificationList:u.a},name:"appRoot"}},51:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e(14),a=e.n(i),o=e(4);n.default={props:["notification"],data:function(){return{timer:null}},methods:a()({},e.i(o.b)(["closeNotification"])),created:function(){var t=this;(!this.notification.hasOwnProperty("timeout")||this.notification.timeout)&&(this.timer=setTimeout(function(){clearTimeout(t.timer),t.notification.animation="fadeIn",t.closeNotification(t.notification)},3e3))}}},52:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e(14),a=e.n(i),o=e(31),c=e.n(o),u=e(4);n.default={computed:a()({},e.i(u.a)({notifications:function(t){return t.notification.notifications}})),components:{Notification:c.a}}},53:function(t,n,e){"use strict";var i=e(6),a=e.n(i);n.a={login:function(t){return a.a.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),a.a.post("/api/v1/auth/login",t)},getMe:function(){return a.a.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),a.a.get("/api/v1/auth/me")}}},54:function(t,n,e){"use strict";var i=e(6),a=e.n(i);n.a={add:function(t){return a.a.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),a.a.post("/api/v1/club",t)},getList:function(){return a.a.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),a.a.get("/api/v1/club")}}},55:function(t,n,e){"use strict";var i,a=e(8),o=e.n(a),c=e(21),u=e.n(c),r=e(5),s=e(20),f={authenticated:!1,invalid:!1,user:{username:"",email:"",role:0}},l=(i={},o()(i,r.e,function(t,n){t.authenticated=n}),o()(i,r.f,function(t,n){t.user=u()({},n)}),o()(i,r.a,function(t,n){t.invalid=n}),i),d={login:function(t,n){var e=t.commit,i=(t.dispatch,n.data),a=n.router;s.a.auth.login(i).then(function(t){var n=t.data.token,i=t.data.user;localStorage.setItem("token",n),e(r.e,!0),e(r.f,i),a.replace({name:"club"})}).catch(function(){e(r.e,!1),e(r.a,!0)})},checkAuth:function(t){var n=t.commit,e=!!localStorage.getItem("token");n(r.e,e),e&&s.a.auth.getMe().then(function(t){n(r.f,t.data.user)}).catch(function(){alert("Алдаа")})}},m={};n.a={state:f,mutations:l,actions:d,getters:m}},56:function(t,n,e){"use strict";var i=e(8),a=e.n(i),o=e(5),c=e(20),u={clubs:[]},r=a()({},o.d,function(t,n){t.clubs=n}),s={clubAdd:function(t,n){var e=t.dispatch;c.a.club.add(n).then(function(){e("showNotification","Шинээр "+n.name+" клуб нэмэгдэв"),e("getClubs")}).catch(function(t){t=t.response.data,t="message"in t?t:{message:"Алдаа"},e("showNotification",t.message)})},getClubs:function(t){var n=t.commit;c.a.club.getList().then(function(t){var e=t.data.data;n(o.d,e)}).catch(function(t){t=t.response.data,t="message"in t?t:{message:"Алдаа"},dispatch("showNotification",t.message)})}},f={};n.a={state:u,mutations:r,actions:s,getters:f}},57:function(t,n,e){"use strict";var i,a=e(8),o=e.n(a),c=e(5),u={notifications:[]},r=(i={},o()(i,c.b,function(t,n){t.notifications.push(n)}),o()(i,c.c,function(t,n){var e=t.notifications.indexOf(n);e>-1&&t.notifications.splice(e,1)}),i),s={showNotification:function(t,n){var e=t.commit,i={type:"error",animation:"fadeIn",msg:n};e(c.b,i)},closeNotification:function(t,n){var e=t.commit;setTimeout(function(){e(c.c,n)},500)}};n.a={state:u,mutations:r,actions:s}},86:function(t,n){},87:function(t,n){},88:function(t,n){},89:function(t,n){},90:function(t,n){},91:function(t,n){},93:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{},[e("router-view"),t._v(" "),e("notification-list")],1)},staticRenderFns:[]}},94:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"notification-list"},[t._l(t.notifications,function(t){return[e("notification",{attrs:{notification:t}})]})],2)},staticRenderFns:[]}},95:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement;return(t._self._c||n)("div",{staticClass:"notification animated",class:t.notification.animation},[t._v("\n  "+t._s(t.notification.msg)+"\n")])},staticRenderFns:[]}},99:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e(2),a=e(28),o=e.n(a),c=e(29),u=e(30),r=e.n(u),s=e(13);i.a.use(r.a),s.a.dispatch("checkAuth"),i.a.config.productionTip=!1,new i.a({el:"#app",template:"<App/>",components:{App:o.a},router:c.a,store:s.a})}},[99]);
//# sourceMappingURL=app.3e4bf02ec01a2ddfbfd7.js.map